Controller code

at the time of writing this file, credit for all of the code, except the code in ChibiContoller, goes to Scot Tomer (https://github.com/torque)